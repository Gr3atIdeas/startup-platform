{% extends 'accounts/base.html' %}
{% load static %}

{% block title %}Профиль пользователя{% endblock %}

<link rel="stylesheet" href="{% static 'accounts/css/profile.css' %}" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Unbounded:wght@300;400&display=swap" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@700&display=swap" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Circe:wght@400&display=swap" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Blippo-Black+CY+[Rus+by+me]:wght@400&display=swap" />

{% block content %}
    {% if messages %}
        <ul class="django-messages" style="list-style-type: none; padding: 10px; background-color: #f8d7da; border: 1px solid #f5c6cb; border-radius: 5px; margin-bottom: 20px; color: #721c24; text-align: center;">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

<div class="profile-page-container" style="width: 100%; background: linear-gradient(153deg, black 0%, #00346B 25%, #004E9F 48%, #01366D 64%, #020202 100%); overflow: hidden; flex-direction: column; justify-content: flex-start; align-items: center; display: flex; padding-top: 20px;">
    {# Header section removed as it should be inherited from base.html #}

    <div class="profile-featured-section">
        {# <img class="profile-featured-bg-image" src="{% static 'accounts/images/profile/profile_spacebg.webp' %}" alt="Фоновое изображение профиля" /> #}
        <div class="profile-content-layout" style="width: 1303px; justify-content: space-between; align-items: flex-start; display: inline-flex; margin-top: -140px; position:relative; z-index:1;">
            <div class="profile-sidebar-column" style="width: 256px; padding: 32px; background: #011B35; box-shadow: 0px 40px 32px -24px rgba(15, 15, 15, 0.12); overflow: hidden; border-radius: 10px; border: 1px #353945 solid; flex-direction: column; justify-content: flex-start; align-items: center; gap: 24px; display: inline-flex;">
                <div class="profile-avatar-section" style="flex-direction: column; justify-content: center; align-items: center; gap: 24px; display: flex;">
                    <img style="width: 160px; height: 160px; border-radius: 128px; object-fit: cover;" src="{% if user.profile_picture_url %}{{ user.profile_picture_url }}{% else %}{% static 'accounts/images/icons/image_placeholder.svg' %}{% endif %}" alt="Аватар пользователя" />
                </div>
                <div class="profile-user-info" style="flex-direction: column; justify-content: center; align-items: center; gap: 20px; display: flex;">
                    <div style="flex-direction: column; justify-content: flex-start; align-items: center; gap: 10px; display: flex;">
                        <div style="justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex;">
                            <div style="color: #FCFCFD; font-size: 20px; font-family: 'Unbounded', sans-serif; font-weight: 400; line-height: 18px;">{{ user.first_name|default:"Имя" }}</div>
                            <div style="color: #FCFCFD; font-size: 20px; font-family: 'Unbounded', sans-serif; font-weight: 400; line-height: 18px;">{{ user.last_name|default:"Фамилия" }}</div>
                        </div>
                        <div style="color: #F5DB0C; font-size: 14px; font-family: 'Unbounded', sans-serif; font-weight: 300; line-height: 18px;">{{ user.role.role_name|default:"Роль не указана" }}</div>
                        <div style="justify-content: flex-start; align-items: center; gap: 8px; display: inline-flex;">
                            <div style="color: rgba(252, 252, 253, 0.30); font-size: 12px; font-family: 'Unbounded', sans-serif; font-weight: 300; letter-spacing: 0.12px;">ID {{ user.user_id|default:"Не указан" }}</div>
                            <div style="width: 11px; height: 11px; position: relative; overflow: hidden; cursor:pointer;" title="Копировать ID"> {/* Copy Icon */}
                                <div style="width: 7.91px; height: 7.91px; left: 2.41px; top: 2.41px; position: absolute; background: linear-gradient(0deg, #004E9F 0%, #006EDF 100%);"></div>
                                <div style="width: 7.91px; height: 7.91px; left: 0.69px; top: 0.69px; position: absolute; background: linear-gradient(0deg, #004E9F 0%, #006EDF 100%);"></div>
                            </div>
                        </div>
                    </div>
                    <div style="width: 186px; text-align: center; color: #777E90; font-size: 12px; font-family: 'Unbounded', sans-serif; font-weight: 300; letter-spacing: 0.12px; word-wrap: break-word;">{{ user.bio|default:"Описание отсутствует."}}</div>
                    {% if user.website_url %}
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: inline-flex;">
                        <div style="width: 16px; height: 16px; position: relative; overflow: hidden;"> {/* Globe Icon */}
                            <div style="width: 13.33px; height: 13.33px; left: 1.33px; top: 1.33px; position: absolute; background: #777E90;"></div>
                            <div style="width: 6.67px; height: 13.33px; left: 4.67px; top: 1.33px; position: absolute; background: #777E90;"></div>
                            <div style="width: 13.33px; height: 1.33px; left: 1.33px; top: 7.33px; position: absolute; background: #777E90;"></div>
                        </div>
                        <a href="{{ user.website_url }}" target="_blank" style="color: #FCFCFD; font-size: 14px; font-family: 'DM Sans', sans-serif; font-weight: 700; line-height: 16px; text-decoration:none;">{{ user.website_url }}</a>
                    </div>
                    {% endif %}
                </div>

                {% if is_own_profile %}
                <div class="profile-avatar-upload" style="margin-top: 15px; padding:10px; border: 1px dashed #353945; border-radius:5px; width:100%; text-align:center;">
                    <h4 style="color: #FCFCFD; font-size: 14px; font-family: 'Unbounded', sans-serif; margin-bottom:10px;">Загрузить аватарку</h4>
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="file" name="avatar" accept="image/*" required style="color: #777E90; font-size: 12px; margin-bottom:10px; max-width: 180px;">
                        <button type="submit" style="padding: 8px 15px; background: linear-gradient(180deg, #FFEF2B 0%, #F9F7D6 100%); color: black; border: none; border-radius: 5px; cursor: pointer; font-family: 'Unbounded', sans-serif; font-size:14px;">Загрузить</button>
                    </form>
                </div>
                {% endif %}

                <div class="profile-user-actions" style="display: flex; flex-direction: column; align-items: center; gap: 10px; width: 100%;">
                    <a href="#" style="height: 40px; padding: 12px 35px; background: linear-gradient(180deg, #FFEF2B 0%, #F9F7D6 100%); border-radius: 10px; justify-content: center; align-items: center; display: inline-flex; text-decoration:none; width: calc(100% - 70px);">
                        <div style="color: black; font-size: 16px; font-family: 'Unbounded', sans-serif; font-weight: 400; line-height: 16px;">Моя Галактика</div>
                    </a>
                    {% if is_own_profile %}
                         <a href="{% url 'create_startup' %}" style="height: 40px; padding: 12px 20px; background: #006EDF; border-radius: 10px; justify-content: center; align-items: center; display: inline-flex; text-decoration:none; width: calc(100% - 40px);">
                            <div style="color: white; font-size: 16px; font-family: 'Unbounded', sans-serif; font-weight: 400; line-height: 16px;">Создать стартап</div>
                        </a>
                    {% endif %}
                </div>

                <div class="profile-social-links" style="padding-top: 8px; padding-bottom: 8px; justify-content: center; align-items: center; gap: 16px; display: inline-flex;">
                    <a href="#" title="Соцсеть 1"><img style="width: 25px; height: 23.47px;" src="{% static 'accounts/images/profile/Mask_group.png' %}" /></a>
                    <a href="#" title="Соцсеть 2"><img style="width: 25px; height: 25px;" src="{% static 'accounts/images/profile/Mask_group.png' %}" /></a>
                </div>
                <div class="profile-sidebar-divider" style="width: 199px; height: 1px; background: #353945;"></div>
                <div style="width: 186px; text-align: center; color: #777E90; font-size: 12px; font-family: 'Unbounded', sans-serif; font-weight: 300; letter-spacing: 0.12px;">На площадке с {{ user.created_at|date:"d M Y"|default:"Неизвестно" }}</div>
            </div>

            <div class="profile-main-column" style="width: 976px; flex-direction: column; justify-content: flex-start; align-items: flex-end; gap: 20px; display: inline-flex;">
                {% if is_own_profile %}
                <div class="profile-edit-button-area" style="justify-content: flex-start; align-items: flex-start; display: inline-flex;">
                    <a href="#" style="padding: 12px 16px; border-radius: 10px; border: 1px white solid; justify-content: center; align-items: center; gap: 12px; display: flex; text-decoration: none;">
                        <div style="text-align: right; color: white; font-size: 16px; font-family: 'Unbounded', sans-serif; font-weight: 400; line-height: 16px;">Редактировать профиль</div>
                        <div style="width: 16px; height: 16px; position: relative; overflow: hidden;"> 
                           <img src="{% static 'accounts/images/profile/Edit_Line.svg' %}" alt="Редактировать" style="width:100%; height:100%;">
                        </div>
                    </a>
                </div>
                {% endif %}
                <div class="profile-startups-section" style="align-self: stretch; padding: 32px; box-shadow: 0px 40px 32px -24px rgba(0, 0, 0, 0.12); overflow: hidden; border-radius: 10px; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 48px; display: flex; margin-top: {% if not is_own_profile %}60px{% else %}0px{% endif %};">
                    <div class="profile-startup-tabs" style="align-self: stretch; justify-content: flex-start; align-items: flex-start; gap: 12px; display: inline-flex;">
                        <div style="padding: 6px 12px; background: #E6E8EC; border-radius: 10px; display: flex;"><div style="color: #23262F; font-size: 14px; font-family: 'Unbounded', sans-serif; font-weight: 300; line-height: 18px;">Стартапы</div></div>
                        <div style="padding: 6px 12px; border-radius: 100px; display: flex;"><div style="color: rgba(255, 255, 255, 0.50); font-size: 14px; font-family: 'Unbounded', sans-serif; font-weight: 300; line-height: 18px;">Новости</div></div>
                    </div>
                    
                    {% for i in "123" %} 
                    <div class="profile-startup-card-wrapper" style="align-self: stretch; display: flex; flex-direction: column; gap: 20px;">
                        <div class="profile-startup-card" style="width: 100%; padding: 23px 32px 23px 20px; overflow: hidden; border-radius: 10px; justify-content: space-between; align-items: center; gap: 20px; display: flex; background-color: #032347; ">
                            <img style="width: 100px; height: 100px; object-fit: cover; border-radius: 8px;" src="{% static 'accounts/images/profile/Rectangle_4196.png' %}" alt="Лого стартапа {{i}}" />
                            <div style="flex-grow:1; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 13px; display: inline-flex;">
                                <div style="color: white; font-size: 20px; font-family: 'Unbounded', sans-serif; font-weight: 400; line-height: 18px;">Ромашка {{i}}</div>
                                <div style="width: 100%; justify-content: space-between; align-items: center; display: inline-flex;">
                                    <div style="color: white; font-size: 12px; font-family: 'Unbounded', sans-serif; font-weight: 300; letter-spacing: 0.12px;">Рейтинг 4,2/5 (534)</div>
                                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex;">
                                        <div style="color: white; font-size: 14px; font-family: 'Circe', sans-serif; font-weight: 400; line-height: 18px;">17 <span style="font-size:10px">отзывов</span></div>
                                    </div>
                                </div>
                            </div>
                            <div style="flex-direction: column; justify-content: center; align-items: center; gap: 10px; display: inline-flex; min-width:180px;">
                                <div style="padding: 5px 12px; background: #050505; border-radius: 5px;"><div style="text-align: center; color: white; font-size: 12px; font-family: 'Unbounded', sans-serif; font-weight: 300; letter-spacing: 0.12px;">Медицина</div></div>
                                <div style="width: 150px; height: 27px; background: black; border-radius: 5px; position:relative; display:flex; align-items:center; justify-content:center;">
                                    <div style="width: 65%; height: 100%; background: #FFEF2B; border-radius: 5px; position:absolute; left:0; top:0;"></div>
                                    <div style="position:relative; color: black; font-size: 12px; font-family: 'Unbounded', sans-serif; font-weight: 300; letter-spacing: 0.12px;">65%</div>
                                </div>
                            </div>
                            <a href="#" style="height: 40px; padding: 12px 35px; background: linear-gradient(0deg, #004E9F 0%, #006EDF 100%); border-radius: 10px; justify-content: center; align-items: center; display: inline-flex; text-decoration: none;">
                                <div style="color: #F5F5F5; font-size: 16px; font-family: 'Unbounded', sans-serif; font-weight: 400; line-height: 16px;">Подробнее</div>
                            </a>
                        </div>
                        {% if not forloop.last %}
                        <div class="profile-startup-divider" style="width: 100%; height: 1px; background: rgba(255, 255, 255, 0.2);"></div>
                        {% endif %}
                    </div>
                    {% empty %}
                         <p style="color: #777E90; font-size: 14px; font-family: 'Unbounded', sans-serif;">У вас пока нет стартапов.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    {# Footer section removed as it should be inherited from base.html #}
</div>
{% endblock %}