{% load static %}
{% load accounts_extras %}

{% for similar in similar_franchises %}
<a href="{% url 'franchise_detail' similar.franchise_id %}" class="similar-card">
  <div class="similar-card-image">
    {% if similar.logo_urls %}
      <img src="{% get_file_url_tag similar.logo_urls.0 similar.franchise_id 'logo' %}" alt="Логотип">
    {% else %}
      <div class="planet">
        <img src="{% static 'accounts/images/icons/planet_placeholder.svg' %}" alt="Планета">
      </div>
    {% endif %}
  </div>
  <div class="similar-card-name">{{ similar.title|default:"Франшиза" }}</div>
  <div class="similar-card-rating" data-rating="{{ similar.average_rating|default:0|floatformat:'-2' }}">
    <div class="stars">
      {% for i in "12345" %}
        <i class="fas fa-star {% if forloop.counter <= similar.average_rating %}filled{% endif %}"></i>
      {% endfor %}
    </div>
    <span class="rating-value">{{ similar.average_rating|default:0|floatformat:"1" }}</span>
  </div>
      <div class="similar-card-category">
      <div class="category-badge">{{ similar.direction.direction_name|default:"Категория" }}</div>
    </div>
</a>
{% endfor %}

{% if similar_franchises|length < 4 %}
  {% for i in "1234" %}
    {% if forloop.counter > similar_franchises|length %}
      <a href="#" class="similar-card placeholder">
        <div class="similar-card-image"><div class="planet"></div></div>
        <div class="similar-card-name">Название франшизы</div>
        <div class="similar-card-rating">
          <div class="stars">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
          </div>
          <span class="rating-value">0.0</span>
        </div>
        <div class="similar-card-category">
          <div class="category-badge">Категория</div>
        </div>
      </a>
    {% endif %}
  {% endfor %}
{% endif %}
